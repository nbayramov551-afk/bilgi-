<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>X-NEURAL OMEGA | WORLD EDITION</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Rajdhani:wght@300;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --neon: #00ffff; --magenta: #ff00ff; --gold: #ffd700; --bg: #000; --glass: rgba(255,255,255,0.07); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { margin: 0; background: var(--bg); color: #fff; font-family: 'Rajdhani', sans-serif; height: 100vh; overflow: hidden; }

        /* Cyber Background */
        .grid-bg { position: fixed; inset: 0; background-image: linear-gradient(rgba(0,255,255,0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(0,255,255,0.05) 1px, transparent 1px); background-size: 40px 40px; z-index: -1; }
        .glow-sphere { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 300px; height: 300px; background: radial-gradient(circle, rgba(0,255,255,0.1) 0%, transparent 70%); z-index: -1; }

        header { padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--neon); background: rgba(0,0,0,0.9); }
        .logo { font-family: 'Orbitron'; color: var(--neon); font-size: 1.1rem; font-weight: 900; letter-spacing: 3px; }

        /* Advanced Settings Panel */
        .settings-card { margin: 15px; padding: 15px; background: var(--glass); border: 1px solid rgba(0,255,255,0.15); border-radius: 15px; backdrop-filter: blur(10px); }
        .label { font-family: 'Orbitron'; font-size: 0.6rem; color: var(--gold); margin-bottom: 8px; display: block; letter-spacing: 1px; }
        
        #lang { width: 100%; background: #080808; color: #fff; border: 1px solid var(--neon); padding: 12px; border-radius: 10px; font-size: 0.95rem; font-family: 'Rajdhani'; font-weight: 700; }

        /* Main Engine Room */
        .engine-room { height: 45vh; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }
        .wave { position: absolute; width: 150px; height: 150px; border: 1px solid var(--neon); border-radius: 50%; opacity: 0; }
        .active .wave { animation: pulse-ring 1.5s infinite; opacity: 1; }
        @keyframes pulse-ring { 0% { transform: scale(0.8); opacity: 0.8; } 100% { transform: scale(1.6); opacity: 0; } }

        .mic-btn { width: 110px; height: 110px; border-radius: 50%; background: #000; border: 3px solid var(--neon); color: var(--neon); font-size: 3rem; z-index: 10; transition: 0.3s; box-shadow: 0 0 15px var(--neon); }
        .active .mic-btn { border-color: var(--magenta); color: var(--magenta); box-shadow: 0 0 30px var(--magenta); }

        #status-text { margin-top: 25px; font-family: 'Orbitron'; font-size: 0.7rem; color: var(--neon); letter-spacing: 2px; }

        /* Result HUD */
        #hud { position: fixed; inset: 0; top: 10%; background: rgba(0,0,0,0.98); border-top: 4px solid var(--neon); border-radius: 30px 30px 0 0; transform: translateY(110%); transition: 0.5s ease-out; z-index: 1000; }
        #hud.active { transform: translateY(0); }
        .hud-scroll { padding: 25px; height: 75%; overflow-y: auto; }
        
        .res-box { background: rgba(255,255,255,0.04); padding: 18px; border-radius: 12px; margin-bottom: 15px; border-left: 4px solid var(--magenta); }
        .res-box h5 { margin: 0; font-family: 'Orbitron'; font-size: 0.55rem; color: var(--gold); }
        .res-box p { margin: 8px 0 0; font-size: 1.3rem; font-weight: 700; color: #fff; }

        /* Actions */
        .bottom-actions { position: absolute; bottom: 0; width: 100%; padding: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px; background: #000; }
        .btn { padding: 16px; border-radius: 10px; border: none; font-family: 'Orbitron'; font-weight: 900; font-size: 0.75rem; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .btn-play { background: var(--neon); color: #000; }
        .btn-share { background: transparent; border: 2px solid #25D366; color: #25D366; }
    </style>
</head>
<body>
    <div class="grid-bg"></div>
    <div class="glow-sphere"></div>
    
    <header>
        <div class="logo">X-NEURAL OMEGA</div>
        <i class="fas fa-globe-americas" style="color:var(--neon)"></i>
    </header>

    <div class="settings-card">
        <span class="label"><i class="fas fa-map-marker-alt"></i> WORLD LANGUAGE DATABASE</span>
        <select id="lang">
            <optgroup label="Æsas DillÉ™r">
                <option value="en">ğŸ‡ºğŸ‡¸ ENGLISH (USA / UK)</option>
                <option value="tr">ğŸ‡¹ğŸ‡· TÃœRKÃ‡E (TÃœRKÄ°YE)</option>
                <option value="ru">ğŸ‡·ğŸ‡º Ğ Ğ£Ğ¡Ğ¡ĞšĞ˜Ğ™ (RUSSIA)</option>
                <option value="de">ğŸ‡©ğŸ‡ª DEUTSCH (GERMANY)</option>
                <option value="fr">ğŸ‡«ğŸ‡· FRANÃ‡AIS (FRANCE)</option>
            </optgroup>
            <optgroup label="Avropa">
                <option value="it">ğŸ‡®ğŸ‡¹ ITALIANO (ITALY)</option>
                <option value="es">ğŸ‡ªğŸ‡¸ ESPAÃ‘OL (SPAIN)</option>
                <option value="pt">ğŸ‡µğŸ‡¹ PORTUGUÃŠS (PORTUGAL)</option>
                <option value="nl">ğŸ‡³ğŸ‡± NEDERLANDS (NETHERLANDS)</option>
                <option value="pl">ğŸ‡µğŸ‡± POLSKI (POLAND)</option>
                <option value="sv">ğŸ‡¸ğŸ‡ª SVENSKA (SWEDEN)</option>
                <option value="uk">ğŸ‡ºğŸ‡¦ UKRAINIAN (UKRAINE)</option>
            </optgroup>
            <optgroup label="Asiya & ÅÉ™rq">
                <option value="ar">ğŸ‡¸ğŸ‡¦ ARABIC (SAUDI ARABIA)</option>
                <option value="ja">ğŸ‡¯ğŸ‡µ JAPANESE (JAPAN)</option>
                <option value="ko">ğŸ‡°ğŸ‡· KOREAN (KOREA)</option>
                <option value="zh-CN">ğŸ‡¨ğŸ‡³ CHINESE (CHINA)</option>
                <option value="hi">ğŸ‡®ğŸ‡³ HINDI (INDIA)</option>
                <option value="id">ğŸ‡®ğŸ‡© INDONESIAN (INDONESIA)</option>
                <option value="vi">ğŸ‡»ğŸ‡³ VIETNAMESE (VIETNAM)</option>
            </optgroup>
            <optgroup label="DigÉ™r">
                <option value="pt-BR">ğŸ‡§ğŸ‡· PORTUGUÃŠS (BRAZIL)</option>
                <option value="es-MX">ğŸ‡²ğŸ‡½ ESPAÃ‘OL (MEXICO)</option>
                <option value="fa">ğŸ‡®ğŸ‡· PERSIAN (IRAN)</option>
            </optgroup>
        </select>
    </div>

    <div class="engine-room" id="engine-ui">
        <div class="wave"></div>
        <div class="wave" style="animation-delay: 0.4s"></div>
        <button class="mic-btn" onclick="runEngine()">
            <i class="fas fa-microphone-lines"></i>
        </button>
        <div id="status-text">SÄ°STEM HAZIRDIR</div>
        <div style="font-size: 0.6rem; color: gray; margin-top: 5px;">TOXUNUN VÆ DANIÅIN</div>
    </div>

    <div id="hud">
        <div style="padding: 15px; text-align: right; border-bottom: 1px solid #222;">
            <i class="fas fa-times-circle" onclick="closeHud()" style="font-size: 1.8rem; color: var(--magenta)"></i>
        </div>
        <div class="hud-scroll">
            <div class="res-box">
                <h5>INPUT DATA (AZ)</h5>
                <p id="orig-out"></p>
            </div>
            <div class="res-box" style="border-left-color: var(--neon)">
                <h5>NEURAL OUTPUT</h5>
                <p id="trans-out" style="color: var(--neon)"></p>
            </div>
        </div>
        <div class="bottom-actions">
            <button class="btn btn-play" onclick="play()"><i class="fas fa-play"></i> SÆSLÆNDÄ°R</button>
            <button class="btn btn-share" onclick="share()"><i class="fas fa-share-alt"></i> PAYLAÅ</button>
        </div>
    </div>

    <script>
        let recorder, bits = [], audioFile;
        const ui = document.getElementById('engine-ui'), info = document.getElementById('status-text'), hud = document.getElementById('hud');

        async function runEngine() {
            if (!recorder || recorder.state === 'inactive') {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                recorder = new MediaRecorder(stream); bits = [];
                recorder.onstart = () => { ui.classList.add('active'); info.innerText = "DÄ°NLÆNÄ°LÄ°R..."; };
                recorder.onstop = async () => {
                    ui.classList.remove('active'); info.innerText = "TÆRCÃœMÆ EDÄ°LÄ°R...";
                    const fd = new FormData(); fd.append('audio_data', new Blob(bits)); fd.append('lang', document.getElementById('lang').value);
                    const res = await fetch('/process_voice', { method: 'POST', body: fd });
                    const d = await res.json();
                    if(!d.error) {
                        document.getElementById('orig-out').innerText = d.original;
                        document.getElementById('trans-out').innerText = d.translated;
                        audioFile = d.audio_url;
                        hud.classList.add('active'); info.innerText = "HAZIR";
                        play();
                    }
                };
                recorder.ondataavailable = e => bits.push(e.data);
                recorder.start();
            } else { recorder.stop(); }
        }

        function play() { if(audioFile) new Audio(audioFile).play(); }

        async function share() {
            if(!audioFile) return;
            const r = await fetch(audioFile);
            const b = await r.blob();
            const f = new File([b], 'x-neural-omega.mp3', { type: 'audio/mp3' });
            if (navigator.share) {
                navigator.share({ files: [f], text: document.getElementById('trans-out').innerText });
            } else {
                const a = document.createElement('a'); a.href = audioFile; a.download = 'x-neural.mp3'; a.click();
            }
        }
        function closeHud() { hud.classList.remove('active'); }
    </script>
</body>
</html>

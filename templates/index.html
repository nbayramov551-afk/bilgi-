<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>X-NEURAL TITAN | SUPREMACY</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Rajdhani:wght@300;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --neon: #00ffff; --magenta: #ff00ff; --gold: #ffd700; --bg: #000205; --glass: rgba(0, 255, 255, 0.03); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { margin: 0; background: var(--bg); color: #fff; font-family: 'Rajdhani', sans-serif; height: 100vh; overflow: hidden; }

        /* Cybernetic Background */
        .titan-grid { position: fixed; inset: 0; background-image: linear-gradient(var(--glass) 1px, transparent 1px), linear-gradient(90deg, var(--glass) 1px, transparent 1px); background-size: 30px 30px; z-index: -1; }
        .glow-overlay { position: fixed; inset: 0; background: radial-gradient(circle at 50% 50%, rgba(0,255,255,0.05) 0%, transparent 80%); z-index: -1; }

        header { padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--neon); background: rgba(0,0,0,0.9); box-shadow: 0 0 30px rgba(0,255,255,0.2); }
        .logo { font-family: 'Orbitron'; font-weight: 900; letter-spacing: 3px; font-size: 1.2rem; color: var(--neon); text-shadow: 0 0 10px var(--neon); }

        /* Language Panel */
        .settings-container { margin: 15px; padding: 15px; background: rgba(255,255,255,0.02); border: 1px solid rgba(0,255,255,0.1); border-radius: 20px; backdrop-filter: blur(10px); }
        .label { font-family: 'Orbitron'; font-size: 0.6rem; color: var(--gold); margin-bottom: 10px; display: block; letter-spacing: 2px; }
        
        #lang { width: 100%; background: #000; color: #fff; border: 1px solid var(--neon); padding: 12px; border-radius: 12px; font-size: 0.9rem; font-family: 'Rajdhani'; font-weight: 700; }

        /* Mic Engine */
        .engine-container { height: 42vh; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }
        .mic-wrapper { position: relative; width: 150px; height: 150px; display: flex; align-items: center; justify-content: center; }
        
        .pulse-ring { position: absolute; width: 100%; height: 100%; border: 2px solid var(--neon); border-radius: 50%; opacity: 0; }
        .active .pulse-ring { animation: hyper-pulse 1.5s infinite; opacity: 1; }
        @keyframes hyper-pulse { 0% { transform: scale(1); opacity: 0.8; } 100% { transform: scale(1.8); opacity: 0; } }

        .mic-btn { width: 110px; height: 110px; border-radius: 50%; background: #000; border: 3px solid var(--neon); color: var(--neon); font-size: 3.5rem; z-index: 10; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 0 20px rgba(0,255,255,0.3); }
        .active .mic-btn { border-color: var(--magenta); color: var(--magenta); box-shadow: 0 0 40px var(--magenta); transform: scale(0.9); }

        #status { margin-top: 30px; font-family: 'Orbitron'; font-size: 0.75rem; color: var(--neon); letter-spacing: 2px; text-transform: uppercase; }

        /* HUD Results */
        #hud { position: fixed; inset: 0; top: 12%; background: rgba(0,4,8,0.98); border-top: 4px solid var(--magenta); border-radius: 40px 40px 0 0; transform: translateY(110%); transition: 0.5s ease-out; z-index: 2000; }
        #hud.active { transform: translateY(0); }
        .hud-scroll { padding: 30px; height: 70%; overflow-y: auto; }
        
        .result-card { background: rgba(255,255,255,0.03); padding: 20px; border-radius: 18px; margin-bottom: 20px; border-left: 5px solid var(--neon); }
        .result-card h4 { margin: 0; font-family: 'Orbitron'; font-size: 0.6rem; color: var(--gold); }
        .result-card p { margin: 10px 0 0; font-size: 1.4rem; font-weight: 700; line-height: 1.4; color: #fff; }

        /* Footer Buttons */
        .footer-btns { position: absolute; bottom: 0; width: 100%; padding: 25px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px; background: #000; border-top: 1px solid #111; }
        .btn-action { padding: 18px; border-radius: 15px; border: none; font-family: 'Orbitron'; font-weight: 900; font-size: 0.8rem; display: flex; align-items: center; justify-content: center; gap: 10px; cursor: pointer; }
        .btn-play { background: var(--neon); color: #000; box-shadow: 0 0 15px rgba(0,255,255,0.4); }
        .btn-share { background: transparent; border: 2px solid #25D366; color: #25D366; }
    </style>
</head>
<body>
    <div class="titan-grid"></div>
    <div class="glow-overlay"></div>
    
    <header>
        <div class="logo">X-NEURAL TITAN</div>
        <i class="fas fa-shield-halved" style="color:var(--magenta)"></i>
    </header>

    <div class="settings-container">
        <span class="label">NEURAL LANGUAGE DATABASE</span>
        <select id="lang">
            <optgroup label="TÉ™cili / Populyar">
                <option value="tr">ğŸ‡¹ğŸ‡· TÃœRKÄ°YE (TÃ¼rkÃ§e)</option>
                <option value="en">ğŸ‡ºğŸ‡¸ USA / UK (English)</option>
                <option value="ru">ğŸ‡·ğŸ‡º RUSSIA (Ğ ÑƒÑÑĞºĞ¸Ğ¹)</option>
                <option value="uk">ğŸ‡ºğŸ‡¦ UKRAINE (Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°)</option>
                <option value="de">ğŸ‡©ğŸ‡ª GERMANY (Deutsch)</option>
            </optgroup>
            <optgroup label="Avropa">
                <option value="fr">ğŸ‡«ğŸ‡· FRANCE (FranÃ§ais)</option>
                <option value="it">ğŸ‡®ğŸ‡¹ ITALY (Italiano)</option>
                <option value="es">ğŸ‡ªğŸ‡¸ SPAIN (EspaÃ±ol)</option>
                <option value="pt">ğŸ‡µğŸ‡¹ PORTUGAL (PortuguÃªs)</option>
                <option value="nl">ğŸ‡³ğŸ‡± NETHERLANDS (Dutch)</option>
                <option value="sv">ğŸ‡¸ğŸ‡ª SWEDEN (Svenska)</option>
                <option value="pl">ğŸ‡µğŸ‡± POLAND (Polski)</option>
                <option value="uk">ğŸ‡¬ğŸ‡· GREECE (Î•Î»Î»Î·Î½Î¹ÎºÎ¬)</option>
            </optgroup>
            <optgroup label="Asiya & ÅÉ™rq">
                <option value="ar">ğŸ‡¸ğŸ‡¦ ARABIC (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</option>
                <option value="ja">ğŸ‡¯ğŸ‡µ JAPAN (æ—¥æœ¬èª)</option>
                <option value="ko">ğŸ‡°ğŸ‡· KOREA (í•œêµ­ì–´)</option>
                <option value="zh-CN">ğŸ‡¨ğŸ‡³ CHINA (ä¸­æ–‡)</option>
                <option value="hi">ğŸ‡®ğŸ‡³ INDIA (à¤¹à¤¿à¤¨à¥à¤¦à¥€)</option>
                <option value="id">ğŸ‡®ğŸ‡© INDONESIA (Bahasa)</option>
                <option value="fa">ğŸ‡®ğŸ‡· IRAN (ÙØ§Ø±Ø³ÛŒ)</option>
                <option value="th">ğŸ‡¹ğŸ‡­ THAILAND (à¹„à¸—à¸¢)</option>
            </optgroup>
            <optgroup label="Amerika & DigÉ™r">
                <option value="pt-BR">ğŸ‡§ğŸ‡· BRAZIL (PortuguÃªs)</option>
                <option value="es-MX">ğŸ‡²ğŸ‡½ MEXICO (EspaÃ±ol)</option>
                <option value="vi">ğŸ‡»ğŸ‡³ VIETNAM (Tiáº¿ng Viá»‡t)</option>
            </optgroup>
        </select>
    </div>

    <div class="engine-container" id="titan-ui">
        <div class="mic-wrapper" onclick="toggleTitan()">
            <div class="pulse-ring"></div>
            <div class="pulse-ring" style="animation-delay: 0.5s"></div>
            <button class="mic-btn">
                <i class="fas fa-microphone-lines"></i>
            </button>
        </div>
        <div id="status">SÄ°STEM STANDBY-DADIR</div>
    </div>

    <div id="hud">
        <div style="padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #111;">
            <span style="font-family:Orbitron; color:var(--neon); font-size:0.7rem;">TITAN CORE PROCESSOR</span>
            <i class="fas fa-circle-chevron-down" onclick="closeHud()" style="font-size: 2rem; color: var(--magenta)"></i>
        </div>
        <div class="hud-scroll">
            <div class="result-card">
                <h4>DATA SOURCE (AZ)</h4>
                <p id="txt-orig"></p>
            </div>
            <div class="result-card" style="border-left-color: var(--magenta)">
                <h4>NEURAL OUTPUT</h4>
                <p id="txt-trans" style="color: var(--neon)"></p>
            </div>
        </div>
        <div class="footer-btns">
            <button class="btn-action btn-play" onclick="play()"><i class="fas fa-play"></i> SÆSLÆNDÄ°R</button>
            <button class="btn-action btn-share" onclick="share()"><i class="fas fa-share-nodes"></i> PAYLAÅ</button>
        </div>
    </div>

    <script>
        let rec, chunks = [], aUrl;
        const ui = document.getElementById('titan-ui'), status = document.getElementById('status'), hud = document.getElementById('hud');

        async function toggleTitan() {
            if (!rec || rec.state === 'inactive') {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                rec = new MediaRecorder(stream); chunks = [];
                rec.onstart = () => { ui.classList.add('active'); status.innerText = "DÄ°NLÆNÄ°LÄ°R..."; };
                rec.onstop = async () => {
                    ui.classList.remove('active'); status.innerText = "TITAN EMAL EDÄ°R...";
                    const fd = new FormData(); fd.append('audio_data', new Blob(chunks)); fd.append('lang', document.getElementById('lang').value);
                    try {
                        const res = await fetch('/process_voice', { method: 'POST', body: fd });
                        const d = await res.json();
                        if(!d.error) {
                            document.getElementById('txt-orig').innerText = d.original;
                            document.getElementById('txt-trans').innerText = d.translated;
                            aUrl = d.audio_url;
                            hud.classList.add('active'); status.innerText = "HAZIR";
                            play();
                        }
                    } catch(e) { status.innerText = "SÄ°STEM XÆTASI!"; }
                };
                rec.ondataavailable = e => chunks.push(e.data);
                rec.start();
            } else { rec.stop(); }
        }

        function play() { if(aUrl) new Audio(aUrl).play(); }

        async function share() {
            if(!aUrl) return;
            const res = await fetch(aUrl);
            const blob = await res.blob();
            const file = new File([blob], 'x-titan-msg.mp3', { type: 'audio/mp3' });
            if (navigator.share) {
                navigator.share({ files: [file], text: document.getElementById('txt-trans').innerText });
            } else {
                const a = document.createElement('a'); a.href = aUrl; a.download = 'translation.mp3'; a.click();
            }
        }
        function closeHud() { hud.classList.remove('active'); }
    </script>
</body>
</html>

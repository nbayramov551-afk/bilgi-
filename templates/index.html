<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>X-NEURAL TITAN | ELITE</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Rajdhani:wght@300;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --neon: #00ffff; --magenta: #ff00ff; --gold: #ffd700; --bg: #000108; --card: rgba(0, 255, 255, 0.05); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; background: var(--bg); color: #fff; font-family: 'Rajdhani', sans-serif; height: 100vh; overflow: hidden; }

        /* Nebula Background */
        .nebula { position: fixed; inset: 0; background: radial-gradient(circle at 50% 50%, #001a1a 0%, #000 100%); z-index: -1; }
        .stars { position: absolute; width: 100%; height: 100%; background: url('https://www.transparenttextures.com/patterns/stardust.png'); opacity: 0.3; }

        header { padding: 25px; display: flex; justify-content: space-between; align-items: center; border-bottom: 3px solid var(--neon); background: rgba(0,0,0,0.9); box-shadow: 0 0 25px var(--neon); }
        .logo { font-family: 'Orbitron'; font-weight: 900; letter-spacing: 4px; font-size: 1.3rem; background: linear-gradient(90deg, #00ffff, #ff00ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        /* Premium Select Box */
        .select-area { margin: 20px; padding: 20px; background: var(--card); border: 1px solid rgba(0,255,255,0.2); border-radius: 25px; backdrop-filter: blur(15px); }
        .label { font-family: 'Orbitron'; font-size: 0.65rem; color: var(--gold); display: block; margin-bottom: 12px; letter-spacing: 2px; }
        
        #lang { width: 100%; background: #000; color: var(--neon); border: 2px solid var(--neon); padding: 15px; border-radius: 18px; font-weight: 700; font-size: 1rem; outline: none; box-shadow: 0 0 15px rgba(0,255,255,0.1); }

        /* Supernova Mic */
        .core { height: 42vh; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .mic-hex { position: relative; width: 160px; height: 160px; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .mic-hex::after { content: ''; position: absolute; inset: -10px; border: 2px solid var(--magenta); border-radius: 50%; opacity: 0; animation: wave 2s linear infinite; }
        @keyframes wave { 0% { transform: scale(0.8); opacity: 0.8; } 100% { transform: scale(1.6); opacity: 0; } }

        .mic-btn { width: 110px; height: 110px; background: #000; border: 4px solid var(--neon); border-radius: 50%; color: var(--neon); font-size: 3.5rem; display: flex; align-items: center; justify-content: center; z-index: 10; transition: 0.4s; box-shadow: 0 0 40px var(--neon); }
        .active .mic-btn { border-color: var(--magenta); color: var(--magenta); box-shadow: 0 0 60px var(--magenta); transform: scale(0.9); }
        .active .mic-hex::after { opacity: 1; }

        #status { margin-top: 40px; font-family: 'Orbitron'; font-size: 0.85rem; color: var(--neon); letter-spacing: 3px; font-weight: 900; }

        /* HUD - Result Center */
        #hud { position: fixed; inset: 0; top: 10%; background: rgba(0,5,10,0.99); border-top: 5px solid var(--magenta); border-radius: 40px 40px 0 0; transform: translateY(110%); transition: 0.5s cubic-bezier(0.1, 0.7, 0.1, 1); z-index: 2000; }
        #hud.active { transform: translateY(0); }
        .hud-wrap { padding: 35px; height: 75%; overflow-y: auto; }
        
        .result-box { background: rgba(255,255,255,0.02); padding: 25px; border-radius: 20px; border-right: 5px solid var(--neon); margin-bottom: 25px; border: 1px solid rgba(0,255,255,0.1); }
        .result-box h6 { margin: 0; color: var(--gold); font-family: 'Orbitron'; font-size: 0.6rem; letter-spacing: 2px; }
        .result-box p { margin: 15px 0 0; font-size: 1.6rem; font-weight: 700; line-height: 1.3; }

        /* Control Buttons */
        .footer-nav { position: absolute; bottom: 0; width: 100%; padding: 30px; display: grid; grid-template-columns: 1fr 1fr; gap: 20px; background: #000; }
        .btn-elite { padding: 20px; border-radius: 20px; border: none; font-family: 'Orbitron'; font-weight: 900; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; transition: 0.3s; }
        .btn-audio { background: var(--neon); color: #000; box-shadow: 0 0 20px rgba(0,255,255,0.4); }
        .btn-share { background: transparent; border: 3px solid #25D366; color: #25D366; }
    </style>
</head>
<body>
    <div class="nebula"></div>
    <div class="stars"></div>
    
    <header>
        <div class="logo">X-TITAN ELITE</div>
        <i class="fas fa-fingerprint" style="color:var(--magenta); font-size: 1.5rem;"></i>
    </header>

    <div class="select-area">
        <span class="label">NEURAL ENGINE DATABASE</span>
        <select id="lang">
            <option value="tr">ğŸ‡¹ğŸ‡· TÃœRKÄ°YE (TÃ¼rkÃ§e)</option>
            <option value="en">ğŸ‡ºğŸ‡¸ USA (English)</option>
            <option value="ru">ğŸ‡·ğŸ‡º RUSSIA (Ğ ÑƒÑÑĞºĞ¸Ğ¹)</option>
            <option value="de">ğŸ‡©ğŸ‡ª GERMANY (Deutsch)</option>
            <option value="fr">ğŸ‡«ğŸ‡· FRANCE (FranÃ§ais)</option>
            <option value="it">ğŸ‡®ğŸ‡¹ ITALY (Italiano)</option>
            <option value="es">ğŸ‡ªğŸ‡¸ SPAIN (EspaÃ±ol)</option>
            <option value="pt">ğŸ‡µğŸ‡¹ PORTUGAL (PortuguÃªs)</option>
            <option value="ar">ğŸ‡¸ğŸ‡¦ ARABIC (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</option>
            <option value="ja">ğŸ‡¯ğŸ‡µ JAPAN (æ—¥æœ¬èª)</option>
            <option value="ko">ğŸ‡°ğŸ‡· KOREA (í•œêµ­ì–´)</option>
            <option value="zh-CN">ğŸ‡¨ğŸ‡³ CHINA (ä¸­æ–‡)</option>
            <option value="hi">ğŸ‡®ğŸ‡³ INDIA (à¤¹à¤¿à¤¨à¥à¤¦à¥€)</option>
            <option value="pl">ğŸ‡µğŸ‡± POLAND (Polski)</option>
            <option value="nl">ğŸ‡³ğŸ‡± NETHERLANDS (Dutch)</option>
            <option value="sv">ğŸ‡¸ğŸ‡ª SWEDEN (Svenska)</option>
            <option value="no">ğŸ‡³ğŸ‡´ NORWAY (Norsk)</option>
            <option value="da">ğŸ‡©ğŸ‡° DENMARK (Dansk)</option>
            <option value="fi">ğŸ‡«ğŸ‡® FINLAND (Suomi)</option>
            <option value="id">ğŸ‡®ğŸ‡© INDONESIA (Bahasa)</option>
        </select>
    </div>

    <div class="core" id="ui-main">
        <div class="mic-hex" onclick="triggerTitan()">
            <div class="mic-btn">
                <i class="fas fa-fingerprint"></i>
            </div>
        </div>
        <div id="status">SÄ°STEM STANDBY</div>
    </div>

    <div id="hud">
        <div style="padding: 20px; text-align: center;">
            <i class="fas fa-chevron-down" onclick="closeHud()" style="font-size: 2.5rem; color: var(--magenta)"></i>
        </div>
        <div class="hud-wrap">
            <div class="result-box">
                <h6>SOURCE DATA</h6>
                <p id="out-orig"></p>
            </div>
            <div class="result-box" style="border-right-color: var(--magenta)">
                <h6>NEURAL TRANSLATION</h6>
                <p id="out-trans" style="color: var(--neon)"></p>
            </div>
        </div>
        <div class="footer-nav">
            <button class="btn-elite btn-audio" onclick="playAudio()"><i class="fas fa-volume-up"></i> DÄ°NLÆ</button>
            <button class="btn-elite btn-share" onclick="shareX()"><i class="fas fa-share-nodes"></i> PAYLAÅ</button>
        </div>
    </div>

    <script>
        let rec, chunks = [], voiceUrl;
        const ui = document.getElementById('ui-main'), info = document.getElementById('status'), hud = document.getElementById('hud');

        async function triggerTitan() {
            if (!rec || rec.state === 'inactive') {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    rec = new MediaRecorder(stream); chunks = [];
                    rec.onstart = () => { ui.classList.add('active'); info.innerText = "DÄ°NLÆNÄ°LÄ°R..."; };
                    rec.onstop = async () => {
                        ui.classList.remove('active'); info.innerText = "TITAN EMAL EDÄ°R...";
                        const fd = new FormData(); fd.append('audio_data', new Blob(chunks)); fd.append('lang', document.getElementById('lang').value);
                        try {
                            const res = await fetch('/process_voice', { method: 'POST', body: fd });
                            const d = await res.json();
                            if(!d.error) {
                                document.getElementById('out-orig').innerText = d.original;
                                document.getElementById('out-trans').innerText = d.translated;
                                voiceUrl = d.audio_url;
                                hud.classList.add('active'); info.innerText = "HAZIR";
                                playAudio();
                            }
                        } catch(e) { info.innerText = "BAÄLANTI XÆTASI"; }
                    };
                    rec.ondataavailable = e => chunks.push(e.data);
                    rec.start();
                } catch(e) { alert("Mikrofon icazÉ™si yoxdur!"); }
            } else { rec.stop(); }
        }

        function playAudio() { if(voiceUrl) new Audio(voiceUrl).play(); }

        async function shareX() {
            if(!voiceUrl) return;
            const res = await fetch(voiceUrl);
            const blob = await res.blob();
            const file = new File([blob], 'x-titan-elite.mp3', { type: 'audio/mp3' });
            if (navigator.share) {
                navigator.share({ files: [file], text: document.getElementById('out-trans').innerText });
            } else {
                const a = document.createElement('a'); a.href = voiceUrl; a.download = 'translation.mp3'; a.click();
            }
        }
        function closeHud() { hud.classList.remove('active'); }
    </script>
</body>
</html>

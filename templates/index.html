<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>X-NEURAL TITAN | GOD MODE</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Rajdhani:wght@300;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --neon: #00ffff; --magenta: #ff00ff; --gold: #ffd700; --bg: #000205; --accent: #003333; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { margin: 0; background: var(--bg); color: #fff; font-family: 'Rajdhani', sans-serif; height: 100vh; overflow: hidden; }

        /* Animated Hyper-Space Background */
        .space-bg { position: fixed; inset: 0; background: radial-gradient(circle at 50% 50%, var(--accent) 0%, #000 100%); z-index: -1; }
        .grid-anim { position: absolute; width: 200%; height: 200%; background-image: linear-gradient(var(--neon) 1px, transparent 1px), linear-gradient(90deg, var(--neon) 1px, transparent 1px); background-size: 50px 50px; opacity: 0.03; transform: perspective(500px) rotateX(60deg); animation: moveGrid 15s linear infinite; }
        @keyframes moveGrid { from { transform: perspective(500px) rotateX(60deg) translateY(0); } to { transform: perspective(500px) rotateX(60deg) translateY(50px); } }

        header { padding: 20px 25px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--neon); background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); box-shadow: 0 0 30px rgba(0,255,255,0.2); }
        .logo { font-family: 'Orbitron'; font-weight: 900; letter-spacing: 4px; font-size: 1.3rem; color: var(--neon); text-shadow: 0 0 15px var(--neon); }

        /* Cyber-Selection Panel */
        .panel { margin: 15px; padding: 15px; background: rgba(255,255,255,0.02); border: 1px solid rgba(0,255,255,0.1); border-radius: 20px; box-shadow: inset 0 0 15px rgba(0,255,255,0.05); }
        .panel-label { font-family: 'Orbitron'; font-size: 0.6rem; color: var(--gold); margin-bottom: 10px; display: block; letter-spacing: 2px; text-transform: uppercase; }
        
        #lang { width: 100%; background: #000; color: #fff; border: 2px solid var(--neon); padding: 12px; border-radius: 12px; font-family: 'Rajdhani'; font-weight: 700; font-size: 1rem; cursor: pointer; }

        /* Titan Core (The Big Button) */
        .core-center { height: 45vh; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .mic-sphere { position: relative; width: 180px; height: 180px; display: flex; align-items: center; justify-content: center; }
        .glow-ring { position: absolute; inset: 0; border-radius: 50%; border: 2px solid var(--neon); opacity: 0.3; animation: pulse 2s infinite; }
        .glow-ring:nth-child(2) { animation-delay: 0.5s; }
        @keyframes pulse { 0% { transform: scale(0.8); opacity: 0.8; } 100% { transform: scale(1.5); opacity: 0; } }

        .mic-main { width: 110px; height: 110px; background: #000; border: 3px solid var(--neon); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--neon); font-size: 3.5rem; z-index: 10; transition: 0.4s; box-shadow: 0 0 40px rgba(0,255,255,0.4); }
        .active .mic-main { border-color: var(--magenta); color: var(--magenta); box-shadow: 0 0 60px var(--magenta); transform: scale(0.9); }

        #status-txt { margin-top: 35px; font-family: 'Orbitron'; font-size: 0.8rem; color: var(--neon); letter-spacing: 3px; animation: blink 1.5s infinite; }
        @keyframes blink { 50% { opacity: 0.2; } }

        /* HUD Results (Sliding Panel) */
        #hud { position: fixed; inset: 0; top: 10%; background: rgba(0,3,6,0.99); border-top: 4px solid var(--neon); border-radius: 35px 35px 0 0; transform: translateY(110%); transition: 0.6s cubic-bezier(0.19, 1, 0.22, 1); z-index: 2000; }
        #hud.active { transform: translateY(0); }
        .hud-scroll { padding: 30px; height: 75%; overflow-y: auto; }
        
        .data-box { background: rgba(255,255,255,0.03); padding: 22px; border-radius: 20px; border-left: 4px solid var(--magenta); margin-bottom: 20px; border: 1px solid rgba(0,255,255,0.05); }
        .data-box h5 { margin: 0; font-family: 'Orbitron'; font-size: 0.6rem; color: var(--gold); }
        .data-box p { margin: 12px 0 0; font-size: 1.5rem; font-weight: 700; line-height: 1.4; color: #fff; }

        /* Control Deck */
        .controls { position: absolute; bottom: 0; width: 100%; padding: 25px; display: grid; grid-template-columns: 1fr 1fr; gap: 15px; background: #000; border-top: 1px solid #111; }
        .btn { padding: 18px; border-radius: 15px; border: none; font-family: 'Orbitron'; font-weight: 900; font-size: 0.8rem; display: flex; align-items: center; justify-content: center; gap: 10px; cursor: pointer; transition: 0.2s; }
        .btn-play { background: var(--neon); color: #000; }
        .btn-share { background: transparent; border: 2px solid #25D366; color: #25D366; }
        .btn:active { transform: scale(0.95); }
    </style>
</head>
<body>
    <div class="space-bg"></div>
    <div class="grid-anim"></div>
    
    <header>
        <div class="logo">X-TITAN <span style="font-size: 0.5rem; color: var(--magenta);">GOD MODE</span></div>
        <i class="fas fa-microchip" style="color:var(--neon)"></i>
    </header>

    <div class="panel">
        <span class="panel-label">NEURAL DATABASE (STABLE ONLY)</span>
        <select id="lang">
            <optgroup label="SertifikasiyalÄ± DillÉ™r (100% SÃ¼rÉ™t)">
                <option value="tr">ğŸ‡¹ğŸ‡· TÃœRKÄ°YE - TÃ¼rkÃ§e</option>
                <option value="en">ğŸ‡ºğŸ‡¸ USA - English</option>
                <option value="ru">ğŸ‡·ğŸ‡º RUSSIA - Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="de">ğŸ‡©ğŸ‡ª GERMANY - Deutsch</option>
                <option value="uk">ğŸ‡ºğŸ‡¦ UKRAINE - Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
                <option value="fr">ğŸ‡«ğŸ‡· FRANCE - FranÃ§ais</option>
            </optgroup>
            <optgroup label="DigÉ™r YÃ¼ksÉ™k Kaliteli DillÉ™r">
                <option value="it">ğŸ‡®ğŸ‡¹ ITALY - Italiano</option>
                <option value="es">ğŸ‡ªğŸ‡¸ SPAIN - EspaÃ±ol</option>
                <option value="ar">ğŸ‡¸ğŸ‡¦ ARABIC - Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                <option value="ja">ğŸ‡¯ğŸ‡µ JAPAN - æ—¥æœ¬èª</option>
                <option value="ko">ğŸ‡°ğŸ‡· KOREA - í•œêµ­ì–´</option>
                <option value="pl">ğŸ‡µğŸ‡± POLAND - Polski</option>
                <option value="nl">ğŸ‡³ğŸ‡± NETHERLANDS - Dutch</option>
                <option value="pt">ğŸ‡µğŸ‡¹ PORTUGAL - PortuguÃªs</option>
                <option value="sv">ğŸ‡¸ğŸ‡ª SWEDEN - Svenska</option>
                <option value="hi">ğŸ‡®ğŸ‡³ INDIA - à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                <option value="zh-CN">ğŸ‡¨ğŸ‡³ CHINA - ä¸­æ–‡</option>
            </optgroup>
        </select>
    </div>

    <div class="core-center" id="titan-ui">
        <div class="mic-sphere" onclick="runTitan()">
            <div class="glow-ring"></div>
            <div class="glow-ring"></div>
            <div class="mic-main">
                <i class="fas fa-bolt"></i>
            </div>
        </div>
        <div id="status-txt">SÄ°STEM STANDBY-DADIR</div>
    </div>

    <div id="hud">
        <div style="padding: 15px; text-align: right;">
            <i class="fas fa-times-circle" onclick="hideHud()" style="font-size: 2rem; color: var(--magenta)"></i>
        </div>
        <div class="hud-scroll">
            <div class="data-box">
                <h5>INPUT DATA (AZ)</h5>
                <p id="out-orig"></p>
            </div>
            <div class="data-box" style="border-left-color: var(--neon)">
                <h5>TITAN NEURAL OUTPUT</h5>
                <p id="out-trans" style="color: var(--neon)"></p>
            </div>
        </div>
        <div class="controls">
            <button class="btn btn-play" onclick="play()"><i class="fas fa-play"></i> SÆSLÆNDÄ°R</button>
            <button class="btn btn-share" onclick="megaShare()"><i class="fas fa-share-nodes"></i> PAYLAÅ</button>
        </div>
    </div>

    <script>
        let rec, bits = [], fileUrl;
        const ui = document.getElementById('titan-ui'), info = document.getElementById('status-txt'), hud = document.getElementById('hud');

        async function runTitan() {
            if (!rec || rec.state === 'inactive') {
                const s = await navigator.mediaDevices.getUserMedia({ audio: true });
                rec = new MediaRecorder(s); bits = [];
                rec.onstart = () => { ui.classList.add('active'); info.innerText = "DÄ°NLÆNÄ°LÄ°R..."; };
                rec.onstop = async () => {
                    ui.classList.remove('active'); info.innerText = "ANALÄ°Z EDÄ°LÄ°R...";
                    const fd = new FormData(); fd.append('audio_data', new Blob(bits)); fd.append('lang', document.getElementById('lang').value);
                    
                    try {
                        const r = await fetch('/process_voice', { method: 'POST', body: fd });
                        const d = await r.json();
                        if(!d.error) {
                            document.getElementById('out-orig').innerText = d.original;
                            document.getElementById('out-trans').innerText = d.translated;
                            fileUrl = d.audio_url;
                            hud.classList.add('active'); info.innerText = "HAZIR";
                            play();
                        } else { info.innerText = "DÄ°L DÆSTÆKLÆNMÄ°R"; }
                    } catch(e) { info.innerText = "RENDER XÆTASI!"; }
                };
                rec.ondataavailable = e => bits.push(e.data);
                rec.start();
            } else { rec.stop(); }
        }

        function play() { if(fileUrl) new Audio(fileUrl).play(); }

        async function megaShare() {
            if(!fileUrl) return;
            const r = await fetch(fileUrl);
            const b = await r.blob();
            const f = new File([b], 'x-titan-audio.mp3', { type: 'audio/mp3' });
            if (navigator.share && navigator.canShare({ files: [f] })) {
                navigator.share({ files: [f], text: document.getElementById('out-trans').innerText });
            } else {
                const a = document.createElement('a'); a.href = fileUrl; a.download = 'x-titan-voice.mp3'; a.click();
            }
        }
        function hideHud() { hud.classList.remove('active'); }

        // Avtomatik Dil TÉ™mizlÉ™yicisi (Render Ã¼Ã§Ã¼n)
        window.onload = () => {
            const select = document.getElementById('lang');
            // GÉ™lÉ™cÉ™kdÉ™ iÅŸlÉ™mÉ™yÉ™n dil aÅŸkar olunsa, bura sÉ™tir É™lavÉ™ etmÉ™k kifayÉ™tdir
            // Ã–rnÉ™k: select.querySelector('option[value="fa"]').remove();
        }
    </script>
</body>
</html>
